'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var handleIpcThings=require('./lib/handleIpc');var eleBox=function eleBox(electron){if(!electron){return}var app=electron.app,BrowserWindow=electron.BrowserWindow,ipcMain=electron.ipcMain;this.app=app;this.BrowserWindow=BrowserWindow;this.ipcMain=ipcMain;app.on('window-all-closed',function(){if(process.platform!=='darwin'){app.quit()}})};eleBox.prototype.ready=function(url,opt){var debug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var BrowserWindow=this.BrowserWindow,app=this.app,ipcMain=this.ipcMain;var createWindow=function createWindow(){var url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'https://github.com';var opt=arguments[1];var debug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var defaultOpt={useContentSize:false,center:true,resizable:true,movable:true,minimizable:false,maximizable:false,alwaysOnTop:false,fullscreen:false,skipTaskbar:false,title:'electron',autoHideMenuBar:false,frame:true,backgroundColor:'#ffffff',webPreferences:{webSecurity:true,defaultEncoding:'UTF-8',allowRunningInsecureContent:true,plugins:true,nodeIntegration:true,nodeIntegrationInWorker:false}};var options=_extends(defaultOpt,{width:800,height:600,ipcSync:false},opt);var win=null;win=new BrowserWindow(options);win.loadURL(url);if(debug){win.webContents.openDevTools()}if(defaultOpt.ipcMode){handleIpcThings(defaultOpt.ipcListener,defaultOpt.ipcSync,debug,ipcMain)}return win};app.on('ready',function(){var win=createWindow(url,opt,debug);var contents=win.webContents;contents.on('before-input-event',function(event,input){if(input.type==='keyUp'){switch(input.key){case'F12':contents.toggleDevTools();break;case'F5':contents.reload();break;}}});win.once('ready-to-show',function(){});win.on('closed',function(){win=null})})};module.exports={eleBox:eleBox};